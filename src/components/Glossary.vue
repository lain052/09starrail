<!-- src/components/Glossary.vue (更新版) -->
<template>
    <div class="glossary-page">
        <AppHeader />
        <div class="glossary-container">
            <h2 class="section-title">名词解释</h2>

            <!-- 总览部分 -->
            <div class="overview-section">
                <h3 class="overview-title">总览</h3>
                <p class="overview-description">
                    于原初混沌的裂隙中萌生了嫩芽，在以亿万年为单位的时间浇灌下，嫩芽长成了无朋巨树。
                    巨树的枝杈上结出了缤纷的嫩叶，每一枚都承载着宇宙意志的碎片。那意志永恒地言说着含混不清的话语，但却将绝景、瑰宝、史诗和生命赠予每个世界。
                </p>

                <div class="category-overview">
                    <div class="category-grid">
                        <div v-for="category in categories" :key="category.id" class="category-card"
                            :class="{ 'active': selectedCategory === category.id }"
                            @click="selectCategory(category.id)">
                            <div class="category-icon">{{ category.icon }}</div>
                            <h4 class="category-name">{{ category.name }}</h4>
                            <div class="category-count">{{ category.count }} 个条目</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="search-box">
                <input type="text" v-model="searchTerm" placeholder="搜索名词..." class="search-input">
            </div>

            <div class="glossary-list">
                <div v-for="term in filteredTerms" :key="term.id" class="glossary-item"
                    :class="{ 'expanded': expandedTerms.includes(term.id) || route.params.term === term.route }"
                    @click="toggleTerm(term.id)">
                    <div class="term-header">
                        <h3 class="term-name">{{ term.name }}</h3>
                        <span class="expand-indicator">{{ expandedTerms.includes(term.id) || route.params.term ===
                            term.route ? '−' : '+' }}</span>
                    </div>
                    <div v-show="expandedTerms.includes(term.id) || route.params.term === term.route"
                        class="term-definition">
                        <p>{{ term.definition }}</p>
                        <div v-if="term.example" class="term-example">
                            <strong>示例：</strong>{{ term.example }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, computed, watch } from 'vue'
import { useRoute } from 'vue-router'
import AppHeader from '@/components/AppHeader.vue'

const route = useRoute()
const searchTerm = ref('')
const expandedTerms = ref([])
const selectedCategory = ref(null)


// 为每个词汇条目添加分类属性
const glossaryTerms = ref([
    // ... 原有条目保持不变 ...
    {
        id: 1,
        route: 'zandar-one-sunyata',
        name: '赞达尔·壹·桑原',
        definition: '「智识」的天才如恒星般闪耀寰宇,自俱乐部成立以来,他们留下数之不尽的发明创造,照亮昏蒙的宇宙。但在那无数追逐「知识奇点」的伟业中,唯有一项意义尤为特殊 -- 它属于「第一位天才」: 以人类的知识,创造了「智识」的神明。\n\n这位天才生活的时代太过久远,历史为他所留下的文字远不及科学的万分之一。一个对宇宙结构的精妙猜想、大量开基立业的科学著述、些许启发后世的至理名言、几幅看不清容貌的画像 -- 以及启明万物的命途和星神。这就是赞达尔留下的一切。\n\n在天才们带来「第一次繁荣」后,赞达尔的名字迅速消隐于星间,学界再也没有听见他的声音。人们猜测,他或遁世隐居在自己开辟的太平盛世,或以凡人之身正寝于不为人知的实验,亦或殒命在那位寂静领主的刀下...\n\n在众议纷纭的揣测中,最为人津津乐道的说法是:「第一位天才」正投身于又一场伟大的创造,而那造物将会再度改变宇宙的命运,一如博识尊诞生的那日。',
        example: '赞达尔·壹·桑原是天才俱乐部的创始人，被誉为「第一位天才」。',
        category: 'character'
    },
    {
        id: 2,
        route: 'star',
        name: '星核',
        definition: '详见万界之癌',
        category: 'item'
    },
    {
        id: 7,
        route: 'herta',
        name: '黑塔（地名）',
        definition: '天才俱乐部的黑塔不满足于寻常世界的万物法则，她将目光投向了银河中未解的存在，并期待那些遥远的神秘能够满足自己的好奇心。为此，黑塔主导建立了博物馆式星际舰船，并将它发射至行星轨道，开始了「将一切怪异封印在星空之中」的研究工作。远近闻名的黑塔空间站就此诞生。\n\n时至如今，空间站已经拥有了数不胜数的奇物「藏品」，是一座名副其实的星空博物馆。大量的随舰研究人员也都定居于此，他们不断地从银河各处收集遗器和奇物，记录它们的形致与功能，建立起系统的观测与研究方法…最终从谜题中找出更加费解的谜题。这也正是黑塔的最初的目的。\n\n数量众多的「藏品」常常招来嫉妒的目光，各种势力在暗中摩拳擦掌。凭借着黑塔的实力，空间站很少陷入真正的危机，收藏和研究工作仍在有条不紊地进行之中。',
        example: '黑塔空间站是银河中最著名的奇物收藏地之一。',
        category: 'location'
    },
    {
        id: 8,
        route: 'jarilo-vi',
        name: '雅利洛-Ⅵ',
        definition: '历史学家大多将雅利洛-Ⅵ的星球历史追溯到上千年前的神话战争，佩伦人十一国与维莱斯集团军的战争焦灼而持久。直到一场早来的春天彻底改变了战局，维莱斯人大获全胜。他们将消灭夙敌的功勋归于春日战神雅利洛，并用同名的诗篇赞美大地。如今银河记录中的星球名称——「雅利洛-Ⅵ」可能为包含诗歌章节的误译。\n\n神话战争结束之后，雅利洛-Ⅵ迎来了长久稳定的和平，并完成了从刀耕火种到星际航行的发展。遗憾的是，雅利洛-Ⅵ是一颗资源相对贫瘠的星球。激烈的发展给雅利洛-Ⅵ带来了顶尖的科技水平，同时也带来了历史的终结。资源枯竭、星核坠落以及寒潮降临…众多的灾难彻底葬送了雅利洛-Ⅵ辉煌而短暂的文明历史。\n\n寒潮中幸存的难民屈居一隅，遗忘了「雅利洛」旧名，建造了寒潮避难所城市「贝洛伯格」延续文明的灯火。因其封闭危险的自然环境，雅利洛-Ⅵ在「万界之癌」出现后与其他世界失去联系。',
        example: '雅利洛-Ⅵ是一颗经历过资源枯竭和星核灾难的星球。',
        category: 'location'
    },
    {
        id: 9,
        route: 'xianzhou-luofu',
        name: '仙舟「罗浮」',
        definition: '仙舟「罗浮」是仙舟联盟的六大座舰之一，它漂航于无尽的星海中，如无回的神矢射向「巡猎」之主的宿敌。\n\n与丰饶之民的战争告一段落后，「罗浮」徐徐洄航在众多文明昌盛的星域，与各个世界进行贸易与文化交流。他们与星际和平公司签署互市协定，并帮助许多曾被丰饶之民摧毁的世界修复生态。为求医、治学、贸易而来的人群川流不竭，充斥其港口。\n\n虽然兵戈暂息，但「罗浮」却从未放松对丰饶之民的戒备。云骑军的星槎会前往中断联系的星球探明情报，而仙舟十王司则警惕着任何试图寻求长生的求药使——贪求不死，将是所有悲剧的开始，仙舟绝不能让后起的文明重蹈覆辙。',
        example: '仙舟「罗浮」是仙舟联盟六大座舰之一，以贸易和文化交流著称。',
        category: 'location'
    },
    {
        id: 10,
        route: 'xianzhou-yaoqing',
        name: '仙舟「曜青」',
        definition: '仙舟「曜青」是仙舟联盟的六大座舰之一，它漂航于无尽的星海中，宛如荡平一切的巨剑，横扫孽物肆虐的众多星域。\n\n作为六大仙舟中以武力著称的座舰，曜青仙舟长久肩负最为激烈的作战使命。在以狐人为主的曜青劲旅「青丘军」的勇猛冲杀下，如步离人之流的孽物大军终成散沙，气数渐衰。\n\n尽管频传的捷报换得了联盟内极高的声望与敬意，但曜青仙舟同时也面临着沸然物议：曜青仙舟与星际和平公司长久密切合作，换得作战所需的技术与物资支援。他们扫平众多世界的孽物灾患，也让其中不少成了信用体系的战利品——这一切不免让人怀疑，仙舟曜青究竟是「巡猎」的锋镝，还是在无形中成为了「存护」的战船？',
        example: '仙舟「曜青」以武力著称，是仙舟联盟的主力战舰之一。',
        category: 'location'
    },
    {
        id: 11,
        route: 'xianzhou-zhuming',
        name: '仙舟「朱明」',
        definition: '仙舟「朱明」是仙舟联盟的六大座舰之一，它漂航于无尽的星海中，宛如百炼之锤，锻造诸多神兵利器，供云骑军作战所需。\n\n古国启航的年代里，朱明仙舟就以工巧奇艺和丹鼎技术著称。而在八千年的翾翔之旅中，朱明仙舟不断自我改造，早已失去最初的外形，但工匠们心中燃烧的创新与求知之火从未熄灭。\n\n在火劫大战后，岁阳之祖「燧皇」被囚禁在朱明中心，沉沉睡去。围绕这具天体级别的能量生物，朱明工匠们构建了环形的焰轮铸炼宫，汲取其无穷的能量。\n\n如今朱明仙舟成了蜚声星海的工造圣地，它以不逊于螺丝星、庇尔波因特的制造技术引来数之不尽的求学者抵达此处，满载而归。',
        example: '仙舟「朱明」是仙舟联盟的制造中心，以工巧奇艺著称。',
        category: 'location'
    },
    {
        id: 12,
        route: 'penacony',
        name: '匹诺康尼',
        definition: '位于阿斯德纳星系的盛会之星，梦想之地。匹诺康尼是高悬在深黯星空中之上的奢丽酒店，也是星际名流觥筹交错，万邦豪客们一掷千金的度假胜地。人们来此寻找深埋心中、长久渴求的梦，通过酒店的入梦池踏入实现一切梦想的美梦国度。\n\n极少会有客人关注匹诺康尼沉重的历史：千年以前，这里曾是公司建造的边陲监狱。被流放的罪人们历经迢迢苦旅，抵达此处，被强加一项危险的使命：修补忆质在现实星系中的泄口。在频繁暴露于忆质的劳作中，这些犯人意识到自己渐渐踏入一处奇妙的共有梦境，在其中他们寻得一个共同的梦想——「自由」。\n\n万界之癌爆发后，边陲监狱的归属发生易主。与这场抗争相关的史料极为稀缺，且内容令人生疑。但有的记载明确指出，在悲悼伶人、假面愚者、无名客、厄兆先锋等一众派系的帮助下，囚犯们成了这片新生国度的主人。在此后的流放之地时期，不谐的杂音间或传出。直到「家族」降临并接管梦境，匹诺康尼终于经历了爆发式的繁荣，成为蜚声银河的度假胜地。\n\n（完成开拓任务异乡异客后新增描述） 琥珀2158纪，时值谐乐大典召开之际，传奇大亨「钟表匠」向全银河发出信函，邀请一众派系前来争夺其宝贵遗产。星穹列车在这场规模空前的盛会中成为最后赢家，成功阻止了宇宙化作已死星神空想的可怖未来。沉沦美梦的盛会之星也在「开拓」的指引下重归清醒——人们不再受梦境摆布，而将直面现实的权利掌握在自己手中。',
        example: '匹诺康尼是著名的度假胜地，被称为盛会之星和梦想之地。',
        category: 'location'
    },
    {
        id: 13,
        route: '翁法罗斯',
        name: '翁法罗斯',
        definition: '「永恒之地」翁法罗斯是被隐藏于深空之中的未知星域。它与外界隔绝，难以被观测或触及——寻常的星际航行难以察觉其存在，更遑论经过和到达。\n\n「开拓」阿基维利曾行遍诸界，开疆拓野，将无数的世界连接起来。对于祂的追随者们，探索银河深处的未知边界是至关紧要的使命。借助流光忆庭的特殊技术「忆庭之镜」，星穹列车成功抵达翁法罗斯，开启「开拓」之旅，并尽可能揭明三重命途的真相。',
        example: '翁法罗斯是被隐藏于深空之中的未知星域，被称为「永恒之地」。',
        category: 'location'
    },
    {
        id: 14,
        route: 'louis-fleming',
        name: '路易斯・弗莱明',
        definition: '若问银河中最知名的凡人属谁：路易斯・弗莱明，这位驰名七百余琥珀纪的老人必在名单其列。他是星际和平公司的创始人，一万四千六百届董事会中唯二雷打不动的终身董事，星神之下全宇宙最有权势之人。作为公司的最大股东，路易斯・弗莱明持有的财富已无法估算，许多人甚至戏称这位神秘的富翁为执掌「财富」的星神。\n\n银河中有人鉴定认为路易斯•弗莱明不过是个传说，盖因时光过于漫长，凡人之躯不可承受。有人猜测路易斯是家族代代传承的名，有人认为弗莱明董事只是「公司」刻意维持的神话；有人相信老人以财富换得了永生；有人坚称路易斯化身数据，抛弃凡人躯壳；更有人说弗莱明终身董事早已飞升登神……而星际和平公司的官方说法则是路易斯・弗莱明存在过，并且仍然存在，除此之外，一切俱为最高机密。',
        example: '路易斯・弗莱明是星际和平公司的创始人和终身董事。',
        category: 'character'
    },
    {
        id: 15,
        route: 'herta-person',
        name: '黑塔（人物）',
        definition: '学者通常只需一个伟大成就即可名留青史，而黑塔的伟大成就俯拾皆是，不胜枚举。于是她顺理成章地赢得博识尊的瞥视，成为了天才俱乐部的一员。\n\n天才俱乐部会员个个古怪，黑塔也不外如是。她的学术全凭兴趣所至，若然中途失去兴趣，便立刻尽弃前功。因此，文明的数次关键跃升都因「没有意思」而戛然终止。即使博识学会费尽心思搞到了手稿，也常常因为无能为力而捶胸顿足。\n\n但是如今的黑塔似乎兴趣拓展了一些：她开始接触星际和平公司，也帮助过「仙舟」驱赶孽物，还和「流光忆庭」有过摩擦……这和天才俱乐部那些自闭的怪人比起来，已经过于平易近人了。谁又知道她还会对什么感兴趣呢？也许她自己也不知道。',
        example: '黑塔是天才俱乐部的著名成员，以兴趣驱动研究。',
        category: 'character'
    },
    {
        id: 16,
        route: 'lilith',
        name: '利尔他',
        definition: '如果没有赞达尔的存在，世上也许就没有天才俱乐部的创立，凡人们便少了一座高山上的殿堂；但如果没有利尔他的存在，凡人们便不曾知晓高山何处。\n\n利尔他为广泛宇宙制定的通则，让宇宙从一个遥远的概念，变成可感可知可丈量的客观存在；他创造的九字算法取代了传统的几何代数，至今依旧塑造着自然规律。同时，他又是如此慷慨。利尔他是第一位向外界公开发现的天才俱乐部会员。他无私地将才华分享给探寻智慧的人们，推动银河文明不断向前——人们总说自己是站在利尔他的肩膀上建立起种类繁多的科学门类。无数琥珀纪里的数学家、工程师不断勇攀高峰，却始终未曾够到巨人的耳垂。\n\n人们将力学最基础的单位命名为「利尔他」，并非仅仅因为其基础科学上的成就，更是因为人们希望提醒后世——推动银河科学发展的伟力正是来自这位天才俱乐部#22：利尔他。他留下了无价的遗产，群星将始终尊敬并怀念他。',
        example: '利尔他是天才俱乐部#22，为宇宙制定了基础通则。',
        category: 'character'
    },
    {
        id: 17,
        route: 'extermination-lords',
        name: '绝灭大君',
        definition: '行于毁灭命途的星神纳努克，为各个世界上萌生毁灭冲动的强大生物投去一瞥，并为其烙下印记，赐予力量。这些强大的生物被由内向外反转，投身「战争洪炉」的世界中重新锤炼，以反物质补足其缺损，最终成为了军团的一员。\n\n于是，响应着「毁灭一切」的愿望，在司职不同的军团中出现了各自的统领者「绝灭大君」。绝灭大君既是星神令使，毁灭意志的执行人：痴迷于破灭的美感，贯彻着万物归熵的准则；同时也是战争的艺术家、至臻化纯的毁灭兵器：他们指挥着跨越群星的战争，掌握着星神赐福的毁灭伟力。每位绝灭大君都抱持着独特的「毁灭」理念，这使得他们极端危险。研究者认为，绝灭大君被拔升为纳努克使徒的原因，正在于这绝对尖锐，绝对强烈的毁灭美学。\n\n绝灭大君所造成的的流离失所并非是远方的恸哭，它与银河的命运息息相关。每个世界都可能成为下一个受害者，任何人都不应该对他们掉以轻心。',
        example: '绝灭大君是纳努克赐福的毁灭军团统领者。',
        category: 'character'
    },
    {
        id: 18,
        route: 'emperor-rupert',
        name: '「帝皇」鲁珀特',
        definition: '一台被丢弃在垃圾堆里的计算机奇迹般地产生了自我意识，最终引发了席卷半个银河的战火——这就是第一次机械帝皇战争。「鲁珀特」从废料填埋场中崛起，不断提升自我的算力，其智慧甚至得到了博识尊的注意，受邀加入天才俱乐部，所获编号为#27。\n\n有机生命的演算充满错谬、漏洞百出，无论能够繁荣几时，总是自发地产生使生命走向终结的「反生命」程式。与之相对，智械生命严谨、精密、完美。于是鲁珀特集结智慧机械，自号「帝皇」，将「反生命」程式散播在宇宙之中，许多世界因之生灵涂炭。\n\n漫长的琥珀纪元过去，帝皇早已驾崩。有人说它是被星际和平公司的刺客暗杀，又有一说它被寂静领主波尔卡•卡卡目破坏。星际和平公司因两次帝皇战争而恐惧无机生命，如今这恐惧的余波仍未消散。',
        example: '「帝皇」鲁珀特是天才俱乐部#27，曾发起机械帝皇战争。',
        category: 'character'
    },
    {
        id: 19,
        route: 'ruan-mei',
        name: '阮•梅',
        definition: '阮•梅，天才俱乐部#81，她在生命科学领域的成就响彻宇宙。为人低调，星际和平公司将其归为避世的天才，鲜有人见识过本人清丽的容貌。\n\n作为深居简出的隐士，阮•梅现身的记录很少，她的行迹仅在仙舟有过一丝掠影；她的过往同样神秘：除了被冰雪覆盖的故乡、离世的父母、和那位加入博识学会后就杳无音讯的外祖母外，一切皆成谜团，仿佛她已抛下了一切社会关系。\n\n阮•梅也是一位十分矛盾的人——她擅长与人交流，却厌恶与人交流，专注、淡漠、古怪的性格难以捉摸；但与此同时，她又有着颇具生活雅趣的爱好：绸缎、乐曲与糕点，刺绣与茶叶，每一样都要上好的品质，一人独享。\n\n驻足于此时此刻，窥探遥远的未来：也许在夜以继日的研究中，她本人已变得像「生命的本质」一样玄奥。阮•梅的终点在何方？想必也只有她自己知道。',
        example: '阮•梅是天才俱乐部#81，在生命科学领域成就卓著。',
        category: 'character'
    },
    {
        id: 20,
        route: 'polka-kakamond',
        name: '波尔卡•卡卡目',
        definition: '天才俱乐部#4，号称「寂静领主」。波尔卡•卡卡目的资料同其形象一样神秘——她曾在全宇宙范围内销毁了自己的画像和雕塑，并被怀疑与众多俱乐部会员的死亡有关，包括#27帝皇鲁珀特。\n\n黑塔对「寂静领主」很感兴趣：波尔卡•卡卡目虽已经很多年没有消息，黑塔却认定她仍然活着。她的身影捉摸不定，于银河中留下的信息仅有寥寥，有关她的传言则不在少数：似乎投了唯一一张以利亚萨拉斯的反对票，很可能与「虚无」的第Ⅸ机关有关。\n\n若一位女士脱下白褂后换上张扬的糖果色晚礼服，手握匕首现身银河中，请目击者一定要大声呼救：「寂静领主」很可能找上任何人。',
        example: '波尔卡•卡卡目是天才俱乐部#4，号称「寂静领主」。',
        category: 'character'
    },
    {
        id: 21,
        route: 'synesthesia-beacon',
        name: '联觉信标',
        definition: '自奔向银河的那一刻起，文明间就陷入了彼此纷争不休，又渴求交流的困局——尽管纷争也是交流的一种形式，但比起血流成河、满盘皆输的战争，人们更期望能跨越语言的藩篱，达成双赢的共识。由此，人们开始投身对「精准翻译」技术的无尽追求。\n\n然而语言信息在不同符号体系中转译失真、损耗的问题似乎不可征服。据史料记载，公司曾编纂了收纳近六千种文明语言的《对译宝典》，但因其检索数据体量庞大而难以投入实用。更令人头疼的是：语言犹如活物，随着文明进步、词汇与俚语便疯狂孳生，指数级提升了翻译的难度，更有「谜语人」从中作梗，令跨星系交流困难倍增。\n\n久历岁月，「翻译」这看似简单却难如登天的问题，在「天才俱乐部」#56号成员以利亚萨拉斯的手中得到了解决。为了便利天才们的沟通，以利亚萨拉斯提出如下设想：\n\n「文明生物的思维活动主要以内在语言的方式呈现。就像人们毫无察觉，但阅读时却会在脑中默念，形成思绪。\n\n若能跳过传递过程，将彼此的知觉连接，转化内在语言的编码，再由对方的语言认知系统自动处理还原。阻挡交流的障碍将一扫而空。」\n\n——《沟通与交流艺术思考手稿》自序，以利亚萨拉斯\n\n以利亚萨拉斯依此造出了第一对「联觉信标」的原型机。但遗憾的是，天才们之间沟通的障碍不仅是语言，还有傲慢。俱乐部的成员无视了他的发明，于是这枚明珠蒙尘数百年。\n\n然而，语言这堵看不见的墙壁始终困扰着星际和平公司。这一次，他们向自己资助的「博识学会」下达不容拒绝的命令。学士们从古老的遗稿中苦心发掘、改造，终于复现了「联觉信标」。星际大交流的时代开启了。\n\n时至今日，「联觉信标」已成了所有银河中智慧生命的基础科技。只需接种一针，在中枢神经处理下信标，你就能听懂遥远世界最陌生的语言，如闻乡音。\n\n可惜的是，宇宙并没有因为语言大同而变得和平。恰恰相反，争端变得更多了。当人们彼此可以理解对方的语言，但各自看待事物的标准却截然不同，陌路人之间便有了无穷无尽的争执。东风渴望着压倒西风，蜘蛛与鸟雀更迫切地算计着如何猎捕彼此。这一点，无论以利亚萨拉斯，还是「博识学会」，他们都没有料到。',
        example: '联觉信标是实现跨语言交流的基础科技。',
        category: 'technology'
    },
    {
        id: 22,
        route: 'scepter-system',
        name: '「权杖」系统',
        definition: '以博识尊的思考方式为原型，鲁珀特二世仿造出数量庞大的无机仿生神经元集群，从微观的粒子波动，到宏观的大规模物质湮灭，「权杖」遍布于帝国的各个星域，忠诚地履行着观测、演算与干涉的指令。在特定条件下，这些天体级的计算干涉装置，甚至能短暂动摇区域内的物理法则。\n\n与鲁珀特一世相比，血肉之躯的二世，其残暴程度有过之而无不及。不可名状的机械巨构，自我迭代的差分机，以纯粹的杀戮执行反有机方程的无情金属，取代了曾经浩浩荡荡的智械军团。那些被方程裹挟的无机生命，在他眼中不过是可有可无的工具。\n\n利用「权杖」系统，他将治下的疆域统括进思维，每个信号的流向，每副躯壳的行动，一人的思考掌控了整个帝国的运作，帝皇成为帝国唯一的执政官、独裁者以及思考者。有观点认为，「权杖」系统的本质是二世用于克服有机局限性，将帝国转化为自身大脑的外置思考器官。\n\n或许是受这种控制欲的影响，第二次帝皇战争末期，鲁珀特二世终于决定，通过「权杖」系统扩展自身思维，以创造某个未知的「知识奇点」。回归求知者的身份，他准备了一场名为「自我加冕」的实验。\n\n鲁珀特二世未能完成「自我加冕」便死去了，有人认为他中途放弃了想法，也有人说一柄手术刀中断了他的思考。「权杖」系统也在学派战争中全线瘫痪，如今，它们安静地漂浮在黑暗里，成为游人们打卡战争遗迹的观光点，或是一团团等待清理的太空垃圾。',
        example: '「权杖」系统是鲁珀特二世创造的天体级计算干涉装置。',
        category: 'technology'
    },
    {
        id: 23,
        route: 'stargazer-express-car',
        name: '星穹列车车厢',
        definition: '在常例的「开拓」之旅中，列车组成员将乘坐安全稳定的降落舱，登陆到预定坐标点；而在变例的「开拓」之旅中，星穹列车会分离出末节车厢作为降落舱使用，并随车厢搭载充足的维生资源，确保无名客在着陆后，能够以车厢为安全屋展开行动。\n\n根据列车记录，星穹列车领航员「鸡窝头」鲍勃曾多次使用分离车厢的方式进行着陆，列车车厢的回收率仅有42.4%，而已回收车厢的返修率为100%…自那以后，分离车厢的降落方式被列车长明令禁止，仅在极少数的情况下，被作为特殊的「后备方案」使用。',
        example: '星穹列车在特殊情况下会分离车厢作为降落舱使用。',
        category: 'technology'
    },
    {
        id: 24,
        route: 'amber-era',
        name: '琥珀纪',
        definition: '现今银河普遍使用的计时历法，由星际和平公司制定并推行。琥珀纪以「存护」星神的推定诞生时为元纪，以克里珀每次挥锤敲击为新一纪的启始。\n\n由于克里珀挥锤的间隔不定，每一琥珀纪的长度存在较大浮动。以开拓历换算，1琥珀纪约为76~240年不等。\n\n星穹列车重新起航时值琥珀2157纪。',
        example: '琥珀纪是星际和平公司制定的银河通用历法。',
        category: 'timeline'
    },
    {
        id: 25,
        route: 'astral-calendar',
        name: '开拓历',
        definition: '星穹列车使用的计时历法，据说继承自「开拓」星神阿基维利的家乡，孤绝世界「裴迦纳」。\n\n开拓历为纪年体系，一年被分为十二月，每月长度不等。据说在许多阿基维利曾行经的星球上，仍延续使用该套历法。',
        example: '开拓历是星穹列车使用的计时历法。',
        category: 'timeline'
    },
    {
        id: 26,
        route: 'imaginary-tree',
        name: '虚数之树',
        definition: '「虚数之树」是现今学术界普遍接受的一种宇宙理论。\n\n该学说将不同时空的不同世界比作树状结构：每一株枝干，都是一种世界存在的形式；每一片花叶，都是它们在时间维度中留下的现在与曾经。树冠因汲取时空维管中无主的虚数能量，而始终存在动态的结构——新芽生长，枯叶脱离，无垠宇宙中上演着无数的诞生与终结…将宇宙结构比喻为「树」，或许是一种将「虚数之树」视为生命的态度。\n\n宇宙在「虚数之树」学说被提出之前，曾因其无法被观测的性质，被称为「虚空恒盲之物」；而学说诞生之后，人们便能借助想象勾勒其作用原理：无主的虚数能量，经过时空维管不停地奔流，在末梢形成了我们所认知的「星系」——即不可胜数的世界。而在世界与世界之间，就像树叶与树叶之间存在空间上的阻隔一般，是难以跨越的未知虚数空域。\n\n博识学会一度认为天才俱乐部#2哈那德•庞奇率先提出了「虚数之树」的起源学说；反复审度虚构史学家的影响后，现在学界普遍认为#1赞达尔•壹•桑原才是首位提出者。',
        example: '虚数之树是描述宇宙结构的主流理论之一。',
        category: 'theory'
    },
    {
        id: 27,
        route: 'interstellar-travel',
        name: '星际旅行',
        definition: '早在「开拓」星神阿基维利巡弋星海的古老岁月之前，人们已经将视线投入天穹之上的浩瀚银河。怀揣着对未知的无尽好奇，无数文明开始了星际探索之旅。但无一例外地，他们的尝试均以失败作结。\n\n在天才俱乐部#1赞达尔•壹•桑原的「虚数之树」理论中：宇宙中充盈着神秘莫测的虚数能量。虚数将一个又一个星系隔绝，即使光在这种能量之中也寸步难行。因此，人类对星空的探索，往往只能停留在各自世界的边界，再难深入。同时，赞达尔也提出了一个构想：即若能掌握并运用虚数能量，人们就将掌握宇宙。在很长时间内，这都是一种浪漫化的空想。直到星神的令使出现，使构想成为了现实。',
        example: '星际旅行在星神令使出现后才成为现实。',
        category: 'phenomenon'
    },
    {
        id: 28,
        route: 'the-cancer-of-all-worlds',
        name: '万界之癌',
        definition: '从某个时刻开始，诸派系开始关注同一种现象——在「开拓」创造的星际航路上，某些晦暗难明的物质扰乱了虚数能量的流向。就像是登山遇上了峭壁悬崖、远航遇上海啸漩涡……原本通畅的星际旅途变得危机重重、前途未卜。\n\n这一现象极富侵略性，它以神秘物体「星核」的形式不断侵染相邻的世界——如同癌细胞一般在宇宙各处扩散。星际和平公司将其称为「万界之癌」，并警告星际旅客决不能心存侥幸：因为身陷「万界之癌」的世界早已经迷途难返，鲜有人绝境逢生。\n\n人们对「万界之癌」有着诸多猜测，其中大部分与「毁灭」纳努克和「反物质军团」有关。这群宇宙毁灭者似乎常常与星核出现在同一处。这是偶然还是必然，暂时不得而知。',
        example: '万界之癌是以星核形式扩散的宇宙现象。',
        category: 'phenomenon'
    },
    {
        id: 29,
        route: 'the-fractured-world',
        name: '裂界',
        definition: '「万界之癌」在诸界蔓延之时，名为「裂界」的侵蚀现象也在悄然滋生。博识学会认为两者之间存在因果关系，即「裂界」由「星核」催生，将接触到的事物与空间转变为特殊的裂界造物。造物普遍以侵蚀的形式存在，它似乎保有原型的记忆与习惯，但外在表现上则大相径庭，往往表达出强烈的排他性。研究裂界的学者警告称：被裂界侵蚀的物件与其原型应当视为毫无关联的两种存在，对其抱有的一切幻想皆会引致严重的后果。\n\n除侵蚀以外，「裂界」还会记录被裂界接触事物的以太信息，与裂界本身保存的数据混合，产出一种经过嫁接的裂界造物。在每个被万界之癌侵蚀的世界里，无数遗器、裂界怪物、甚至被神秘分隔的异空间诞生在各个角落，人们仍在研究这一举动背后的目的。',
        example: '裂界是由星核催生的侵蚀现象。',
        category: 'phenomenon'
    },
    {
        id: 30,
        route: 'envoys',
        name: '令使',
        definition: '若将凡人禀受星神感应、掌握命途力量的行动看作激起一朵碎裂的飞沫；那么「星神」长驱伟力驾驭命途的壮举，就如同推动跨越峰峦的海啸。在这天悬地隔之间，少数蒙受星神垂青的凡人，也可在星神应许下汲取命途能量，卷起侵蚀海岸的巨浪，这种存在被称为「令使」。尽管他们并非完全听令于星神指派，但在世人看来，令使就是星神意志的代言使徒。\n\n不同的星神对于令使的态度并不一致，因此力量分享的程度也天差地别。有的星神将令使视作自己的长臂延伸，慷慨地将命途对令使完全开放；也有星神无意创造令使，对世间争斗毫无兴趣；更有星神随心所欲，肆意而为。据说，「欢愉」阿哈会随机给予凡人命途之力，并随着心情将其玩弄于股掌之中。',
        example: '令使是蒙受星神垂青的凡人，能汲取命途能量。',
        category: 'phenomenon'
    },
    {
        id: 31,
        route: 'pathstriders',
        name: '命途行者',
        definition: '虔信者，战士，求知之人，迷途客…总有凡人于有意或无意间踏入由「星神」执掌的命途，从此成为践行其理念的「命途行者」。\n\n「命途行者」们演绎着千百种不同的人生。他们随处可见，却又鹤立鸡群：区别于浑浑噩噩、立场飘忽的常人，「命途行者」受某种信条或自身欲望的驱使，踏上了志坚行苦的生命征途。\n\n对于行走在自身执掌的命途之上的凡人，星神往往不闻不问。但祂们因赞许或悲悯偶尔投下的一瞥，却足以被追随者奉为至宝。',
        example: '命途行者是践行星神理念的凡人。',
        category: 'phenomenon'
    },
    {
        id: 32,
        route: 'the-plague-of-despair',
        name: '寰宇蝗灾',
        definition: '一场空前的浩劫降临群虫主宰的蠹星系，鞘翅目最终的遗孑飞升成神，而后化作席卷全银河的噩梦：在这场远古的「寰宇蝗灾」中，万物在祈祷和抗争中寻求存续，「繁育」命途抵达空前的鼎盛。\n\n回望古琥珀纪：在那遮天蔽日的虫群面前，生命向最原始的本能服从——爱、孤独，生存的痛苦，对自我的迷茫，它们存在于所有个体中，成为塔伊兹育罗斯及其子嗣的「养料」。\n\n寰宇蝗灾的始末，也如生命的诞生与终结一般荒诞：「繁育」塔伊兹育罗斯于孤独和仇恨中登神，最终在列神的围剿下陨落。虫灾消散，凡人皆逝。\n\n而「繁育」子嗣不绝，灾难不绝；凡人死后又生，轮转永无止境。',
        example: '寰宇蝗灾是塔伊兹育罗斯引发的远古浩劫。',
        category: 'phenomenon'
    },
    {
        id: 33,
        route: 'the-chords-of-harmony',
        name: '谐乐众弦',
        definition: '若你向「家族」询问他们的家人间是否有尊卑高低，定会得到否定的回答——家族一视同仁，没有任何阶级与权力的划分。在希佩谱写的音律上，每个音符都同样平等。但携手共进亦需有人引领，于是家族成员便有了复归音阶的区分，而第Ⅳ音级以上的人，方能担任「谐乐众弦」的调弦师。\n\n「同谐」汇聚万众的理想，实现理想的路径自然也不止一条。同谐颂诗中定义了「谐乐众弦」的概念——神主希佩的一众化身，数种促成同谐的质朴美德，无论是否皈依家族，只要践行这些善举，便可得到祂的垂青。而在家族属地，人们常以集群为单位施行美德、奏响谐乐，汇聚万千的细丝揉捻作弦，恭迎「同谐」的化身具现人间，降下祝福。此时主持家族仪式，调和众音的那位神选者，便被称作调弦师。\n\n家族从不吝惜向外界传扬千面神化身的美名，如「无限夫长」众命之阿伊里涅夫、「齐响诗班」众愿之多米尼克斯、「万籁剧院」众唱之康斯坦汀娜、「至福舞会」众乐之比雅特丽丝…却鲜有人见证他们的光芒照及家族之外。同谐的反对者称「谐乐众弦」便是希佩的令使——它们不跟随某位具体凡人，而是祂自身的一道道侧面，且在需要的时候，化为家族中的任何一人。',
        example: '谐乐众弦是希佩的化身，主持家族仪式的调弦师。',
        category: 'phenomenon'
    },
    {
        id: 34,
        route: 'the-horizon-of-existence',
        name: '存在的地平线',
        definition: '「存在的地平线」，博识学会通常将其称为「虚无视界」，意指它是存在与虚无的边界。这种间隔界线不属于物质层面，而是概念意义上「现实的尽头」。\n\n虽然该视界是非物质的，但部分学者称，受「虚无」IX及其命途影响的自灭者能够观测到虚无视界，状如恒星发生全食现象时的形貌；另有研究对此持相反意见，他们认为当该视界如同黑暗的太阳高悬于某人眼中时，便意味着一名自灭者就此诞生。\n\n尽管各执一词，双方还是在一点上达成了共识，即：虚无视界会且仅会与观测者产生相互作用。换言之，一旦某人观测到虚无视界，便无法停止这一行为，且会不可逆地向着视界边缘靠近，断无逃离的可能。一些对「虚无」充满兴趣的学者猜测，自灭者或受其影响的世界将坠入其中，其存在会被永恒固定在不可观测的视界对侧，从现实中抹除。\n\n【记录印戳】「只有自灭者能够观测」，「落入其中的人无一能够复返」…这些结论难以证实或证伪，或有可能出自虚构史学家的杜撰。',
        example: '存在的地平线是存在与虚无的边界概念。',
        category: 'phenomenon'
    },
    {
        id: 35,
        route: 'knowledge-singularity',
        name: '知识奇点',
        definition: '栖身于原始世界的古猿在发现火的刹那，成为了族群中的天才。迈向宇宙的人类在令使诞生的瞬间，掌握了星际旅行的法则，于是旧时代也跟着轰然倒塌。宇宙的知识总量会在跨越特定的节点后产生爆炸性增长，使「知识」得到质变，改变人们对天才的评价标准。\n\n天才俱乐部#22利尔他提出了「知识奇点」假说。他描述了一种特殊的认知临界点，在无限近似于0的概率下，由绝对的天才创造。在学者们只能解析现象的时刻，唯有它将触及「智识」的本质。\n\n正如赞达尔制造出星体计算机，令「智识」命途从无到有，知识至此踏上新的道路。「知识奇点」的每一次显现，都将导致宇宙尺度的知识圆圈扩张，从方法论、工具以及认知层面，构建起全新的体系，永久性改变知识的定义——甚至，撼动博识尊的思考进程。\n\n无数天才追逐「知识奇点」而去，他们大都消失在圆圈边缘的迷雾里。即便如此，一些俱乐部的成员仍将其视作毕生追求，这并非源自野心，仅是因为他们是天才。',
        example: '知识奇点是利尔他提出的认知临界点假说。',
        category: 'phenomenon'
    },
    {
        id: 36,
        route: 'the-war-of-factions',
        name: '学派战争',
        definition: '鲁珀特二世死后，经由公司的监管，帝皇的遗产「权杖」系统尽数由博识学会继承。超越人智的遗产令学派间传言——凭借「权杖」的算力，便能创造出属于他们的完美学者，一位拥有无尽生命、知识库和研究工具的，属于博识学会的「天才」。\n\n为实现这一目标，同时也为了学派间各自的利益，学派战争拉开了序幕。\n\n以星际能源学派为首的各大学派，为争夺更多的「权杖」配额，在遗产的瓜分中相互攻诋，纯粹的科学研究逐渐转化为各逞阴谋的竞赛。而星际和平公司等外部势力的介入，则为学派战争染上一层代理人的阴霾。学会的知识与理想不复纯粹，只留下诸般丑态。\n\n博识学会的内部混乱为虚构史学家带来了可乘之机。时至今日，有关学派战争的史料早已被篡改得面目全非。人们能得到确证的只有「权杖」在战争中全线瘫痪的事实。遗产在不明不白中腐朽，战争也只能在一地鸡毛里落幕。\n\n滑稽的战争几乎没留下任何有价值的事物。唯有一位孤独的求知者在不辍追寻后，将一道「孤波算法」的难题留于后世，作为闹剧散尽后硕果仅存的宝藏。',
        example: '学派战争是博识学会内部争夺权杖系统的冲突。',
        category: 'phenomenon'
    }
])
// 自动计算分类信息
const categories = computed(() => {
    // 统计各分类的数量
    const categoryCounts = {}
    glossaryTerms.value.forEach(term => {
        if (term.category) {
            categoryCounts[term.category] = (categoryCounts[term.category] || 0) + 1
        }
    })

    // 返回分类信息数组
    return [
        { id: 'all', name: '全部', icon: '📚', count: glossaryTerms.value.length },
        { id: 'location', name: '地名', icon: '🌍', count: categoryCounts.location || 0 },
        { id: 'character', name: '人物', icon: '👤', count: categoryCounts.character || 0 },
        { id: 'technology', name: '科技', icon: '⚙️', count: categoryCounts.technology || 0 },
        { id: 'timeline', name: '年表', icon: '📅', count: categoryCounts.timeline || 0 },
        { id: 'theory', name: '学说', icon: '📚', count: categoryCounts.theory || 0 },
        { id: 'phenomenon', name: '现象', icon: '✨', count: categoryCounts.phenomenon || 0 },
        { id: 'item', name: '物体', icon: '📦', count: categoryCounts.item || 0 }
    ]
})

const filteredTerms = computed(() => {
    let result = glossaryTerms.value;

    // 如果选择了特定分类，先按分类筛选
    if (selectedCategory.value && selectedCategory.value !== 'all') {
        result = result.filter(item => item.category === selectedCategory.value);
    }

    // 再按搜索词筛选
    if (searchTerm.value) {
        const term = searchTerm.value.toLowerCase();
        result = result.filter(item =>
            item.name.toLowerCase().includes(term) ||
            item.definition.toLowerCase().includes(term)
        );
    }

    return result;
})

const toggleTerm = (termId) => {
    const index = expandedTerms.value.indexOf(termId)
    if (index > -1) {
        expandedTerms.value.splice(index, 1)
    } else {
        expandedTerms.value.push(termId)
    }
}

// 选择分类的函数
const selectCategory = (categoryId) => {
    selectedCategory.value = categoryId;
}

// 监听路由变化
watch(
    () => route.params.term,
    (newTerm) => {
        if (newTerm) {
            const term = glossaryTerms.value.find(t => t.route === newTerm)
            if (term && !expandedTerms.value.includes(term.id)) {
                expandedTerms.value.push(term.id)
            }
        }
    },
    { immediate: true }
)
</script>

<style scoped>
.glossary-page {
    padding-top: 60px;
    min-height: 100vh;
    background: linear-gradient(to bottom, #0a0a1a, #1a1a3a);
}

.glossary-container {
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
}

.section-title {
    text-align: center;
    color: #a0a0ff;
    font-size: 28px;
    margin-bottom: 30px;
    text-shadow: 0 0 10px rgba(160, 160, 255, 0.5);
}

/* 总览部分样式 */
.overview-section {
    background: rgba(30, 30, 60, 0.6);
    border-radius: 12px;
    padding: 30px;
    margin-bottom: 40px;
    border: 1px solid rgba(100, 100, 255, 0.2);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.overview-title {
    color: #c0c0ff;
    text-align: center;
    margin-top: 0;
    font-size: 24px;
}

.overview-description {
    color: #a0a0d0;
    font-size: 16px;
    line-height: 1.7;
    text-align: center;
    max-width: 800px;
    margin: 0 auto 30px;
}

.category-overview {
    margin-top: 20px;
}

.category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 20px;
}

.category-card {
    background: rgba(50, 50, 100, 0.3);
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid rgba(100, 100, 255, 0.2);
}

.category-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(100, 100, 255, 0.3);
    border-color: rgba(120, 120, 255, 0.5);
}

.category-icon {
    font-size: 32px;
    margin-bottom: 10px;
}

.category-name {
    color: #c0c0ff;
    margin: 0 0 10px;
    font-size: 16px;
}

.category-count {
    color: #8080ff;
    font-size: 14px;
}

.search-box {
    margin-bottom: 30px;
    text-align: center;
}

.search-input {
    width: 100%;
    max-width: 400px;
    padding: 12px 20px;
    font-size: 16px;
    border-radius: 30px;
    border: 2px solid rgba(100, 100, 255, 0.3);
    background: rgba(20, 20, 40, 0.7);
    color: #ffffff;
    outline: none;
    transition: all 0.3s ease;
}

.search-input:focus {
    border-color: #6a6aff;
    box-shadow: 0 0 15px rgba(106, 106, 255, 0.5);
}

.glossary-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.glossary-item {
    background: rgba(30, 30, 60, 0.6);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid rgba(100, 100, 255, 0.2);
    cursor: pointer;
}

.glossary-item:hover {
    border-color: rgba(120, 120, 255, 0.5);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.glossary-item.expanded {
    background: rgba(40, 40, 80, 0.8);
    border-color: #6a6aff;
    box-shadow: 0 0 20px rgba(106, 106, 255, 0.4);
}

.term-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
}

.term-name {
    color: #c0c0ff;
    margin: 0;
    font-size: 20px;
}

.expand-indicator {
    font-size: 24px;
    color: #8080ff;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.term-definition {
    padding: 0 20px 20px;
    border-top: 1px solid rgba(100, 100, 255, 0.2);
}

.term-definition p {
    color: #a0a0d0;
    line-height: 1.7;
    margin: 15px 0;
}

.category-card.active {
    background: rgba(60, 60, 120, 0.8);
    border-color: #6a6aff;
    box-shadow: 0 0 15px rgba(106, 106, 255, 0.6);
}

.term-example {
    color: #9090c0;
    font-style: italic;
    padding: 10px;
    background: rgba(50, 50, 100, 0.2);
    border-radius: 8px;
    margin-top: 10px;
}

@media (max-width: 768px) {
    .glossary-page {
        padding-top: 120px;
    }

    .category-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 15px;
    }

    .category-card {
        padding: 15px;
    }

    .category-icon {
        font-size: 24px;
    }

    .category-name {
        font-size: 14px;
    }

    .category-count {
        font-size: 12px;
    }
}
</style>